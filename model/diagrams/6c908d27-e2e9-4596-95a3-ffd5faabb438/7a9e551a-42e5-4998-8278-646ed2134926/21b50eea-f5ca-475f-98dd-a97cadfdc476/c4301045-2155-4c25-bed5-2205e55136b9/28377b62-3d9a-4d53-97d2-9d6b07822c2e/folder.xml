<archimate:Folder
    xmlns:archimate="http://www.archimatetool.com/archimate"
    name="Supporting ES6 modules on older Node.js versions"
    id="28377b62-3d9a-4d53-97d2-9d6b07822c2e"
    documentation="While support for ES6 modules arrived as an experimental feature in Node.js 8.5, there are two ways to use these modules on earlier Node.js implementations.&#xA;One method is to use the Babel transpiler to rewrite ES6 code so it can execute on older Node.js versions. For an example, see https:/​/​blog.​revillweb.​com/​using- es2015-​es6-​modules-​with-​babel-​6-​3ffc0870095b.&#xA;The better method is the esm package in the Node.js registry. Simply do the following:&#xA;   $ nvm install 6&#xA;   Downloading and installing node v6.14.1...&#xA;   Downloading&#xA;   https://nodejs.org/dist/v6.14.1/node-v6.14.1-darwin-x64.tar.xz...&#xA;   ######################################################################&#xA;   ## 100.0%&#xA;   Computing checksum with shasum -a 256&#xA;   Checksums matched!&#xA;   Now using node v6.14.1 (npm v3.10.10)&#xA;   $ nvm use 6&#xA;   Now using node v6.14.1 (npm v3.10.10)&#xA;$ npm install esm&#xA;... npm output&#xA;$ node --require esm simpledemo.mjs Hello, world!&#xA;11&#xA;24&#xA;24&#xA;39&#xA;4 16&#xA;5 25&#xA;42&#xA;To use this module, one simply invokes require('esm') once, and ES6 modules are retrofitted into Node.js. The --require flag automatically loads the named module. Without rewriting the code, we can selectively use the esm module with this the command-line option.&#xA;This example demonstrates retrofitting ES6 modules into older Node.js releases. To successfully execute the ls.mjs example we must have support for async/await functions, and arrow functions. Since Node.js 6.x does not support either, the ls.mjs example will fail, and will necessitate rewriting such code:&#xA;   $ node --version&#xA;   v6.14.1&#xA;   $ node -r esm ls.mjs&#xA;   /Users/David/chap03/ls.mjs:5&#xA;   (async () => {&#xA;^&#xA;   SyntaxError: Unexpected token (&#xA;    at exports.runInThisContext (vm.js:53:16)&#xA;    at Module._compile (module.js:373:25)&#xA;For more information, see: https:/​/​medium.​com/​web-​on-​the-​edge/​es-​modules-​in-​node-​today-​32cff914e4b. That article describes an older release of the esm module, at the time named @std/esm."/>
